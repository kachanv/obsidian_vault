**Глоссарий**
*SCD* - Slowly Changing Dimensions. Способы сохранения истории изменений данных  

## SCD0
значения атрибутов не изменяются => нет и фиксации истории изменений. Данные только вставляются

## SCD1
значения атрибутов изменяются, при этом дынные обновляются. т.е. происходит update атрибутов на новые значения. История не сохраняется.
* допускается изменение ID при сохранении RK

## SCD2
на каждое изменение атрибута создается новая строка - новая версия с полным новым набором атрибутов
* может содержать флаг валидности версии | номер версии | valid_from | valid_to  - все это опционально. Главное само наличие механизма определение версионности.
![[Pasted image 20240711214841.png|900x700]]

## SCD3
Существует столбец сохраняющий предыдущие N версий атрибута т.е. ограниченное отслеживание версионности на N шагов назад.
![[Pasted image 20240711215049.png]]


## SCD4
Создается 2 таблицы: с текущими данными (не историчная) и с историей изменений, сама история может фиксироваться как угодно (автоинкремент, поля версионности, флаги и т.д.)
* History таблица не хранит текущую версию
* если атрибуты не меняются и в таблицу только падают новые записи то Hisory таблица будет пустая
* Current таблица хранит Key который пойдет в History таблицу
![[Pasted image 20240712231107.png|600x400]]

## SCD5 (4+1)
Таблица SCD4 одной сущности ссылается на SCD1 таблицу другой сущности с помощью FK
![[Pasted image 20240712224217.png|600x400]]

## SCD6 (1+2+3)
SCD1 - любая строка с ID сущности содержит актуальный набор атрибутов
SCD2 - при обновлении в таблицу добавляется строка, есть тех. поля отслеживающие версионность
SCD3 - есть Hisoty поля, показывающие версию актуальную во временной промежуток
![[Pasted image 20240712224908.png|800x400]]

## SCD7 (6+1)
SCD6 - но без полей current т.е. по сути получаем полноценную SCD2
SCD1 - таблица содержащая только текущую версию т.е. последнюю актуальную из предыдущей
* Current таблица хранит только ID сущности, не FK на History таблицу
![[Pasted image 20240712231743.png|800x400]]

## BITAMPORAL
**Опр:** Таблица отслеживающая как бизнесовую так и техническую версионность изменения атрибутов. 
* позволяет хранить историю изменения временных рядов
* *System_* - тех. историчность, *Valid_* - бизнес историчность. 
* фильтруясь по *System_* - получаем временной ряд, актуальный на момент времени

![[Pasted image 20240714183508.png]]

**SRC** 
* https://chengzhizhao.com/unlocking-the-secrets-of-slowly-changing-dimension-scd-a-comprehensive-view-of-8-types/