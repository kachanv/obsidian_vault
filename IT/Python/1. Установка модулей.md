## Pip
**Опр:** система управления пакетами и их зависимостями в Python выполненная в виде CLI
`python -m pip <pip arguments>`
здесь видно что pip используется конкретным python интерпретатором
* поставляется вместе с интерпретатором
* установка пакета с соблюдением всех зависимостей т.е. установит нужные пакеты для работы пакета
* здесь пакет - внешний модуль/библиотека
* удобный CLI `pip`
* *pip* - для установки пакетов python <3, *pip3* для установки пакетов python >= 3
### Откуда устанавливает
* *PyPI* - The Python Package Index - реестр пакетов сообщества python
* внешние репозитории VCS
* локальные VCS и дирректории
	* в этом случае должен содержать файл *setup.py* производящтий установку
* requirements files
## Requirements files
* `requirements.txt` фиксация версий пакетов
* при разветывании окружения автоматически установятся версии пакетов из файлов
* не защитит от транзитивных обновлений - например если для работы устанавливаемого пакета требуется версия другого пакета старше чем в requirements.txt
* можно фиксировать диаппазон версий или версии старше/младше определенной
* `pip install -r requirements.txt` - установить все пакеты перечисленные в requirements.txt
```python
# It is possible to specify requirements as plain names.
pytest

docopt == 0.6.1
requests [security] >= 2.8.1, == 2.8.* ; python_version < "2.7"
mock-django~=0.6.10 # >=0.6.10, ==0.6.*
-r other-requirements.txt
-c constraints.txt
```
## Constraints files
* `requirements.txt` тоже фиксация версий пакетов
* но в отличии от requirements, пакеты не устанавливаются автоматически. pip не установит врсию отличную от указанной, при явном вызове
## Dependency Groups
* `pyproject.toml` организация requirements в группы 
```toml
# pyproject.toml
[dependency-groups]
groupA = [
    "pkg1",
    "pkg2",
]
```
```pip install --group groupA```
## Wheels
* `.whl` специальные архивные файлы из которых устанавливаются пакеты
* ускоряют установку и делают её не зависимой от интернета и рееста пакетов
* pip по дефолту установит пакет из .whl если он есть
```pip install SomePackage-1.0-py2.py3-none-any.whl```
### Важно знать
* по дефолту не переустанавливает пакеты без флага `--upgrade`
* `pip install SomePackage==1.0.4` - установить определенную версию пакета
* `pip freeze > requirements.txt` - зафиксировать все пакеты текущего интерпретатора в requirements.txt
* текущие версии pip могутсами разрешать конфликты с версиями в пакетах в разных requirements files
* при обовлении пакета pip удаляет старую версию `pip unistall
* показать установленные пакеты `pip list`
## Обновление зависимостей пакетов
В проекте есть пакет `SomePackage`, вышла его новая версия, и вы сотите обновиться до последней.
`pip install --upgrade SomePackage`
2 стратегии обновления
* **eager** - обновит *SomePackage* и все зависимые пакеты до последней  совместимой версии, даже если текущая версия зависимых пакетов удовлетворят новой версии *SomePackage*
* **only-if-needed** (def) - обновит *SomePackage* и все зависимые пакеты до последней совместимой версии, только если эти пакеты не удовлятворяют требованиям SomePackage
## pip install
установка и обновление пакетов
* зависимые пакеты устанавливаются в порядке зависимоти, в случае цикличной зависимости установится первый найденный
* by def устанавливает только stable версии пакетов (из реестра). Но в requiremens можно указать конкретную версию
### Options
https://pip.pypa.io/en/stable/cli/pip_install/#options